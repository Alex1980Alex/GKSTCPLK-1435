# 04.5 Релиз

**Создатель:** Lgovskiy Roman | Льговский Роман Николаевич, отредактировано мар 24, 2025

**<В разработке>**

## Аналитик

**Руководствуется потребностью выпуска релиза**
- Периодичность
- ИЛИ договоренность с бизнесом

**Добавляет в Jira задачу**
- Сформировать релиз + <Система> + <Номер релиза>, Версии релизов

## Релиз менеджер

*(TBD: закончить описание алгоритма сборки релиза, возможно добавить автоматизированную сборку)*

**Открывает Git**
- Открывает ветку Проекта/Системы
- Разворачивает меню "Репозиторий"
- Переходит в раздел Ветки
- Нажимает кнопку "Новая ветка"
- Присваивает имя релиза, Версии релизов
- Выбирает ветку с которой будет скопирован релиз, develop
- Нажимает кнопку "Создать ветку"

![GitLab Projects Interface](gitlab_projects.png)

**Открывает EDT**
- Добавляет релизную ветку в EDT
- Пример добавления ветки из Git в EDT приведен тут, 04.31 Разработка
- Добавляет ветку в EDT на основе релизной ветки
- build/<Номер задачи в Jira на подготовку релиза>

**Обновляет версию Системы в процедуре "ПриДобавленииПодсистемы"**

![GitLab Repository Menu](gitlab_repository.png)

**Разворачивает меню "Репозиторий"**
- Переходит в раздел Ветки

![GitLab Branches](gitlab_branches.png)

**Нажимает кнопку "Новая ветка"**

![GitLab New Branch](gitlab_new_branch.png)

- Присваивает имя релиза, Версии релизов
- Выбирает ветку с которой будет скопирован релиз, develop

**Нажимает кнопку "Создать ветку"**
- Открывает EDT
- Добавляет релизную ветку в EDT
- Пример добавления ветки из Git в EDT приведен тут, 04.31 Разработка
- Добавляет ветку в EDT на основе релизной ветки
- build/<Номер задачи в Jira на подготовку релиза>

**Обновляет версию Системы в процедуре "ПриДобавленииПодсистемы"**

![Configuration Code](configuration_code.png)

**Обновляет свойство конфигурации на целевой релиз**

![Configuration Properties](configuration_properties.png)

**Открывает Jira**
- Переходит в целевой Проект/Систему, по которому собирает релиз
- Переходит в раздел Релизы

![Jira Releases](jira_releases.png)

**Создает релиз, Версии релизов**

![Jira Create Release](jira_create_release.png)

- *(tbd дописать подгрузку задач в Релиз Джира)*
- *(tbd расписать подготовку файлов поставки: Основная конфа, расширения)*

**Выгружает Релиз в Предрелизную ветку**

## Релиз менеджер

**Создает ветку релиза в конфлюенс**
- Описание релиза,
- Системы,
- <Система> + <Номер релиза>

**Добавляет ссылку на Джира**

**Добавляет табличку по задачам**

| Номер задачи | Инициатор | Исполнитель | Тестировщик (помимо разработчика) | Статус тестирования | Кто согласовал внедрение в прод. среду (речь про релиз) | Кто осуществлял сборку релиза | Кто внедрил изменение в прод. среду | Кто осуществил мониторинг работоспособности системы после установки обновления |
|--------------|-----------|-------------|-----------------------------------|---------------------|--------------------------------------------------------|------------------------------|-------------------------------------|-------------------------------------------------------------------------------|
|              |           |             |                                   |                     |                                                        |                              |                                     |                                                                               |

**Добавляет раздел Релиз ноут с кратким описанием изменений**

**Отправляет уведомление в чат Системы, например**

```
{
Подготовлен релиз кандидат по системе MFM 2024.11.1.0
Основная конфигурация.
Изменения: https://jira.sodru.com/projects/GMFM/versions/11809
Интеграционные задачи.
Изменения:
2024.11.1.0 - https://jira.sodru.com/projects/INTGMFMADT/versions/11810
2024.11.2.0 - https://jira.sodru.com/projects/INTAPTFORM/versions/11811
Тестовая база:
Srvr="ys-appdev1c01";
Ref="QA_mfm_01";
Прошу выполнить тестовую приемку и подтвердить выпуск релиза
После подтверждения Аналитиками выпуска релиза изменения состава релиза не допускается
}
```

**Добавляет ссылку на задачу на подготовку релиза**
**Добавляет ссылку на задачу на разворачивание релиза в прод**

## Технический писатель

**Заполняет раздел**
- **ДЛЯ Каждой задачи Из списка задач Релиза**
  - Собирает краткие значимые изменения
  - Добавляет описание в Релиз ноутс
- Рассылает "Релиз ноутс" заинтересованным пользователям

**Обновляет инструкции в Сonfluence**
- **ДЛЯ Каждой задачи Из списка задач Релиза**
  - Вносит изменения в пользовательские инструкции
  - Добавляет тематические скриншоты
  - Добавляет описание функционала

## Тестирование

*(tbd. Расписать подготовку базы QA)*

**Обновить основную конфигурацию,**
**Обновить расширения конфигурации,**
**Обновить расширение обменов,**

**Добавить сюда отсыл из раздела по отнесению ошибок на исправление ошибок на тестовой базу**
- За счет расширения + Имя
- За счет изменений в хранилище

**Каждый Аналитик на страничке конфлюенс отмечает напротив задачи статус Протестировано**

**После заполнения таблички по всем строкам - Протестировано Рук отдела аналитиков - пишет Релиз протестирован и согласован к Выпуску в прод**

## Руководитель разработки

**Добавляет в Jira задачу**
- Выпустить релиз + <Система> + <Номер релиза>, Версии релизов

**Добавляет список подчиненных задач, которые необходимо выполнить Релиз менеджеру после обновления, например:**
- Добавить роль в профиль,
- Настроить интеграционный адаптер

**Запрашивает подтверждение об успешном завершении тестировании релиза в ветке канала системы**
**Запрашивает согласование о выпуске релиза в продуктивную базу**

## Руководитель аналитиков

**Согласует приемку Выпуска канале Системы**
**Согласует приемку Выпуска на страничке релиза в Confluence**
**Подтверждает время Выпуска релиза на канале Системы**
**Подтверждает время Выпуска релиза приемку в Confluence**

*(в конфл будет две таблички. 1 - Согласование Аналитиков, 2 Подтверждение выпуска Аналитики + Руководитель разработки)*

## Руководитель разработки

**Делает скриншот с подтверждением приемки**
**Добавляет скриншот в задачу Сформировать релиз**
**Делает скриншот с подтверждением Выпуска релиза в продуктивную базу**
**Добавляет скриншот в задачу Выпустить релиз**
- в том числе, захватывает дату в правом нижнем угле экрана

![Release Confirmation Screenshots](release_confirmation.png)

**Согласует Выпуск релиза**
**Уведомляет Специалиста технической поддержки о необходимости выслать уведомление пользователям о недоступности базы в согласованной интервал по причине обновления**
**Прикладывает список Релиз Ноутс**

## Руководитель аналитиков

**Открывает задачу Джира**
**Добавляет комментарий: Выпуск согласован**

---

## Примечание:

**Чем чаще выпускать релиз тем проще. Требуется компромисс между частотой и количеством задач**

**Для простоты можно договориться выполнять релиз с такой то периодичностью, например, 2 раза в месяц**

**Релизы, в основном, собираются по трем направлениям:**
- Изменение конфигурации
- Изменение формата
- Изменение правил обмена

**Затраты на разворачивание релиза по каждому направлению отнести на соответствующие проекты/системы**

**После подтверждения Аналитиками выпуска релиза изменения состава релиза не допускается**

---

**tbd расписать четыре этапа с документированием в задачах**

1. Подготовить релиз
2. Протестировать релиз
3. Обновить рабочую базу
4. Исправит ошибки после обновления/хотфикс

**tbd Для Аудиторов важно, чтобы при сборке релиза и задачи и релиз проходили такие этапы**

**Включить этапы в требования прохождения задач и релиза по конвейеру**

### Таблица ролей и ответственности

| Кто инициировал разработку | Исполнитель (разработчик) | Кто протестировал (помимо разработчика) | Кто согласовал внедрение в прод. среду | Кто осуществлял сборку релиза | Кто внедрил изменение в прод. среду | Кто осуществил мониторинг работоспособности системы после установки обновления |
|---------------------------|---------------------------|----------------------------------------|---------------------------------------|------------------------------|-------------------------------------|-------------------------------------------------------------------------------|
|                           |                           |                                        |                                       |                              |                                     |                                                                               |

### Замечания от Аудиторов

**Отсутствуют свидетельства:**
- Тестирования
- Внедрения

**Вопрос по согласованию внедрения: на скриншоте видим Абаканович, но вами было указано Берг Е.С.**

**Отсутствуют свидетельства:**
- Инициирования
- Разработки
- Тестирования
- Внедрения

### Подготовить требования:

- Изменение прод баз - только через релизы, исключение составляют хотфиксы
- Для каждого релиза иметь подтверждения в задаче релиза о согласовании. Не только в Мессенджере, но и в самой задаче

### Релиз

- **Задача 1**, Инициатор, Разработчик
  - Тестирование задачи - Добавить подтверждение в задачу, что задача протестирована
- **Задача 2**
- **Задача 3**
- **Задача N**

**Далее - Рук отдела тестировщиков - Пишет - внедрение в про базу Согласовано**

## Тестирование

*(tbd. Расписать подготовку базы QA)*

**Обновить основную конфигурацию,**
**Обновить расширения конфигурации,**
**Обновить расширение обменов,**

**Добавить сюда отсыл из раздела по отнесению ошибок на исправление ошибок на тестовой базу**
- За счет расширения + Имя
- За счет изменений в хранилище

**Каждый Аналитик на страничке конфлюенс отмечает напротив задачи статус Протестировано**

**После заполнения таблички по всем строкам - Протестировано Рук отдела аналитиков - пишет Релиз протестирован и согласован к Выпуску в прод**

## Руководитель разработки

**Добавляет в Jira задачу**
- **Выпустить релиз + <Система> + <Номер релиза>**, Версии релизов

**Запрашивает согласование об успешном завершении тестировании в ветке канала системы**
**Запрашивает согласование о выпуске рели в продуктивную базу**

## Руководитель аналитиков

**Согласует приемку Выпуска канале Системы**
**Согласует приемку Выпуска на страничке релиза в Confluence**
**Подтверждает время Выпуска релиза на канале Системы**
**Подтверждает время Выпуска релиза приемку в Confluence**

*(в конфл будет две таблички. 1 - Согласование Аналитиков, 2 Подтверждение выпуска Аналитики + Руководитель разработки)*

## Руководитель разработки

**Делает скриншот с подтверждением приемки**
**Добавляет скриншот в задачу Сформировать релиз**
**Делает скриншот с подтверждением Выпуска релиза в продуктивную базу**
- Отправляет задачу Джира
- Добавляет комментарий: Выпуск согласован

**Примечание:**

- Чем чаще выпускать релиз тем проще. Требуется компромисс между частотой и количеством задач
- Для простоты можно договориться выполнять релиз с такой то периодичностью, например, 2 раза в месяц
- Релизы, в основном, собираются по трем направлениям:
  - Изменение конфигурации
  - Изменение формата
  - Изменение правил обмена
- Затраты на разворачивание релиза по каждому направлению отнести на соответствующие проекты/системы
- После подтверждения Аналитиками выпуска релиза изменения состава релиза не допускается

---

**tbd расписать четыре этапа с документированием в задачах**

1. Подготовить релиз
2. Протестировать релиз
3. Обновить рабочую базу
4. Исправит ошибки после обновления/хотфикс

**tbd Для Аудиторов важно, чтобы при сборке релиза и задачи и релиз проходили такие этапы**

**Включить этапы в требования прохождения задач и релиза по конвейеру**

### Финальная таблица ответственности

| Кто инициировал разработку | Исполнитель (разработчик) | Кто протестировал (помимо разработчика) | Кто согласовал внедрение в прод. среду | Кто осуществлял сборку релиза | Кто внедрил изменение в прод. среду | Кто осуществил мониторинг работоспособности системы после установки обновления |
|---------------------------|---------------------------|----------------------------------------|---------------------------------------|------------------------------|-------------------------------------|-------------------------------------------------------------------------------|
|                           |                           |                                        |                                       |                              |                                     |                                                                               |

### Замечания от Аудиторов

**Отсутствуют свидетельства:**
- Тестирования
- Внедрения

**Вопрос по согласованию внедрения: на скриншоте видим Абаканович, но вами было указано Берг Е.С.**

**Отсутствуют свидетельства:**
- Инициирования
- Разработки
- Тестирования
- Внедрения

### Подготовить требования:

- Изменение прод баз - только через релизы, исключение составляют хотфиксы
- Для каждого релиза иметь подтверждения в задаче релиза о согласовании. Не только в Мессенджере, но и в самой задаче

### Релиз

- **Задача 1**, Инициатор, Разработчик
  - Тестирование задачи - Добавить подтверждение в задачу, что задача протестирована
- **Задача 2**
- **Задача 3**
- **Задача N**

**Далее - Рук отдела тестировщиков - Пишет - внедрение в про базу Согласовано**

---

**Нет меток**